# Design Tip #41: Drill Down into a More Detailed Bus Matrix

## データウェアハウス・バスアーキテクチャとマトリックスの役割

多くの方は、データウェアハウスのバスアーキテクチャとバスマトリックスについてすでにご存じでしょう。これらは、アーキテクチャに基づいたデータマートを構築する上で中心的な役割を果たします。 バスマトリックスは、組織の主要なビジネスプロセスと、それに関連するディメンションを特定するためのツールです。

- ビジネスプロセス（通常、主要なソースシステムに対応）
  - マトリックスの行としてリストアップ
- ディメンション
  - マトリックスの列として配置
- マトリックスのセル
  - どのディメンションがどのビジネスプロセスに適用されるかを示す

このように、バスマトリックスはデータウェアハウスの全体像を計画するための強力なツールとなります。また、以下のような目的にも活用できます。

- エンタープライズ全体で共有されるディメンションを特定
- 個別の実装チームの作業を調整
- 組織全体において、共有ディメンションの重要性を伝える

私たちは、バスマトリックスの作成が、データウェアハウスチームがビジネス要件を収集した後に最初に取り組むべき重要なタスクの一つであると確信しています。

## マトリックスの詳細化：ファクトテーブルの粒度と視点

バスマトリックスは、データウェアハウスのプレゼンテーション層における「パズルのピース」とその最終的な関連性を俯瞰するためのツールです。しかし、各マトリックスの行（ビジネスプロセス）を実装する際には、より詳細な情報を提供することが有益です。

### 単一のビジネスプロセスから生じる複数のファクトテーブル

- トランザクション
- 定期スナップショット
- 累積スナップショット

これらの異なる視点でビジネスの成果を分析する必要がある場合、単一のビジネスプロセスから複数のファクトテーブルが派生することになります。

### 粒度の異なるファクトテーブル

- 詳細レベル（Atomic）
- 集約レベル（Summarized）
- 異種製品環境での高度な分析をサポートするためのファクトテーブル

このように、異なる粒度や分析要件に対応するために、複数のファクトテーブルが必要になることが多いのです。

### マトリックスの粒度を変更し、ファクトテーブル単位で整理する

バスマトリックスの「粒度（グレイン）」を変更し、各行をビジネスプロセスに関連する単一のファクトテーブル（または OLAP キューブ）として表現することができます。 このアプローチにより、より詳細なデータモデルを明確に定義できます。

### ファクトテーブルの詳細情報を追加

- ファクトテーブルの粒度（Granularity）
- 対応するファクト（実測値、計算値、推定値）

### ディメンションの詳細レベルを明示

- 例えば、「製品（Product）」ディメンションの列において、ブランド（Brand）やカテゴリ（Category）レベルの詳細を示す
- これにより、どのレベルの詳細が各ファクトテーブルに適用されるかを明確化できる

## 詳細化されたマトリックスの活用

このように拡張されたマトリックスは、データウェアハウス内のファクトテーブルの体系的なロードマップとなります。ただし、最初から詳細なマトリックスを作成するのではなく、まずはシンプルで高レベルなマトリックスを作成し、各ビジネスプロセスの実装に応じて詳細を掘り下げることを推奨します。

また、すでにデータウェアハウスを運用している組織にとっては、詳細なマトリックスが「現状（As-Is）」を文書化するための有用なツールとなります。これにより、データウェアハウスの成熟度を評価し、さらなる最適化のための指針を得ることができます。

## まとめ

- バスマトリックスは、データウェアハウスの全体計画、データ統合、組織内のコミュニケーションを支援する重要なツール
- 単一のビジネスプロセスから複数のファクトテーブルが派生することが多いため、マトリックスの粒度を調整し、詳細情報を追加することが有益
- 最初はシンプルなマトリックスを作成し、各ビジネスプロセスの実装に応じて詳細を掘り下げるアプローチが推奨される
- 既存のデータウェアハウス環境では、詳細なマトリックスが「現状（As-Is）」の文書化と最適化の指針として活用できる

このように、バスマトリックスはデータウェアハウスの設計・管理において不可欠なツールであり、適切に活用することで、より効果的なデータ統合とビジネスインテリジェンスの実現が可能となります。

[Design Tip #41: Drill Down into a More Detailed Bus Matrix](https://www.kimballgroup.com/2002/11/design-tip-41-drill-down-into-a-more-detailed-bus-matrix/)
